<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake Investment Portfolio</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="broker-name-container">
                        <h1 id="broker-name"><i class="fas fa-chart-line"></i> <span id="broker-name-text">Investment Portfolio</span></h1>
                        <button id="edit-broker-name" class="btn-icon edit-only" title="Edit broker name">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>
                </div>
                <div class="header-controls edit-only">
                    <select id="currency-selector" class="btn btn-secondary" title="Select Currency" data-test="currency-selector">
                        <option value="USD">$ USD</option>
                        <option value="EUR">€ EUR</option>
                        <option value="GBP">£ GBP</option>
                        <option value="JPY">¥ JPY</option>
                        <option value="CAD">C$ CAD</option>
                        <option value="AUD">A$ AUD</option>
                    </select>
                    <button id="screenshot-mode-btn" class="btn btn-secondary">
                        <i class="fas fa-camera"></i> Screenshot Mode
                    </button>
                    <button id="theme-selector" class="btn btn-secondary">
                        <i class="fas fa-palette"></i> Theme
                    </button>
                    <button id="reset-portfolio-btn" class="btn btn-danger edit-only" title="Reset Portfolio">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Navigation -->
        <nav class="main-nav">
            <button class="nav-item active" data-view="portfolio">
                <i class="fas fa-wallet"></i> Portfolio
            </button>
            <button class="nav-item" data-view="transactions">
                <i class="fas fa-exchange-alt"></i> Transactions
            </button>
            <button class="nav-item" data-view="analytics">
                <i class="fas fa-chart-bar"></i> Analytics
            </button>
        </nav>

        <!-- Portfolio Overview -->
        <section id="portfolio-view" class="view active">
            <div class="portfolio-summary">
                <div class="total-value">
                    <h2>Total Portfolio Value</h2>
                    <div class="value-display">
                        <span class="currency">$</span>
                        <span id="total-value">0.00</span>
                    </div>
                    <div class="change-display">
                        <span id="total-change">+$0.00</span>
                        <span id="total-change-percent">(+0.00%)</span>
                    </div>
                </div>
                <div class="balance-display">
                    <h3>Available Balance</h3>
                    <div class="balance-container">
                        <div class="value-display">
                            <span class="currency">$</span>
                            <span id="balance-value" data-test="balance-value">0.00</span>
                        </div>
                        <button id="edit-balance" class="btn-icon edit-only" title="Edit balance" data-test="edit-balance-btn">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="holdings-section">
                <div class="section-header">
                    <h3>Holdings</h3>
                    <button id="add-asset-btn" class="btn btn-primary edit-only" data-test="open-add-asset-modal">
                        <i class="fas fa-plus"></i> Add Asset
                    </button>
                </div>
                <div id="holdings-list" class="holdings-list">
                    <!-- Holdings will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Transactions View -->
        <section id="transactions-view" class="view">
            <div class="section-header">
                <h3>Transaction History</h3>
                <button id="add-transaction-btn" class="btn btn-primary edit-only">
                    <i class="fas fa-plus"></i> Add Transaction
                </button>
            </div>
            <div id="transactions-list" class="transactions-list">
                <!-- Transactions will be populated by JavaScript -->
            </div>
        </section>

        <!-- Analytics View -->
        <section id="analytics-view" class="view">
            <div class="analytics-grid">
                <div class="chart-container">
                    <h3>Portfolio Performance</h3>
                    <canvas id="performance-chart" width="400" height="200"></canvas>
                </div>
                <div class="stats-container">
                    <h3>Statistics</h3>
                    <div class="stat-item">
                        <span class="stat-label">Total Invested:</span>
                        <span id="total-invested">$0.00</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Total Return:</span>
                        <span id="total-return">$0.00</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Best Performer:</span>
                        <span id="best-performer">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Total Transactions:</span>
                        <span id="total-transactions">0</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modals -->
    <!-- Add Asset Modal -->
    <div id="add-asset-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Asset</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="add-asset-form">
                <div class="form-group">
                    <label for="asset-symbol">Symbol:</label>
                    <div class="symbol-input-container">
                        <div class="symbol-nasdaq-container">
                            <input type="text" id="asset-symbol" required placeholder="e.g., AAPL, BTC" autocomplete="off" data-test="asset-symbol">
                            <a id="asset-nasdaq-link" href="#" target="_blank" class="btn btn-secondary btn-small" title="Check price on NASDAQ" style="display: none;">
                                <i class="fas fa-external-link-alt"></i> NASDAQ
                            </a>
                        </div>
                        <div id="ticker-suggestions" class="ticker-suggestions hidden"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="asset-name">Name:</label>
                    <input type="text" id="asset-name" required placeholder="e.g., Apple Inc." data-test="asset-name">
                </div>
                <div class="form-group">
                    <label for="asset-quantity">Initial Quantity:</label>
                    <input type="number" id="asset-quantity" step="0.00001" required data-test="asset-quantity">
                </div>
                <div class="form-group">
                    <label for="asset-price" id="asset-price-label" data-test="asset-price-label">Current Price ($):</label>
                    <div class="price-input-container">
                        <input type="number" id="asset-price" step="0.01" required data-test="asset-price">
                        <div id="price-status" class="price-status hidden">
                            <span id="price-status-text"></span>
                            <button type="button" id="fetch-price-btn" class="btn-icon" title="Fetch current price">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary" data-test="add-asset-btn">Add Asset</button>
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Transaction Modal -->
    <div id="add-transaction-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Transaction</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="add-transaction-form">
                <div class="form-group">
                    <label for="transaction-asset">Asset:</label>
                    <div class="asset-selection-container">
                        <select id="transaction-asset" required>
                            <option value="">Select an asset</option>
                        </select>
                        <a id="transaction-nasdaq-link" href="#" target="_blank" class="btn btn-secondary btn-small" title="Check price on NASDAQ" style="display: none;">
                            <i class="fas fa-external-link-alt"></i> NASDAQ
                        </a>
                    </div>
                </div>
                <div class="form-group">
                    <label for="transaction-type">Type:</label>
                    <select id="transaction-type" required>
                        <option value="buy">Buy</option>
                        <option value="sell">Sell</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="transaction-quantity">Quantity:</label>
                    <input type="number" id="transaction-quantity" step="0.00001" required>
                </div>
                <div class="form-group">
                    <label for="transaction-price" id="transaction-price-label">Price per unit ($):</label>
                    <input type="number" id="transaction-price" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="transaction-date">Date:</label>
                    <input type="datetime-local" id="transaction-date" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Add Transaction</button>
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Reset Confirmation Modal -->
    <div id="reset-confirmation-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reset Portfolio</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="warning-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p><strong>Warning:</strong> This action will permanently delete all your portfolio data, including:</p>
                    <ul>
                        <li>All assets and holdings</li>
                        <li>Transaction history</li>
                        <li>Portfolio balance (will reset to default)</li>
                    </ul>
                    <p>This action cannot be undone.</p>
                </div>
                <div class="additional-reset-options">
                    <label class="checkbox-container">
                        <input type="checkbox" id="reset-broker-theme-checkbox">
                        <span class="checkmark"></span>
                        Also reset broker name and theme to default
                    </label>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" id="confirm-reset-btn" class="btn btn-danger">
                    <i class="fas fa-trash-alt"></i> Yes, Reset Everything
                </button>
                <button type="button" class="btn btn-secondary close-modal">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Screenshot Controls -->
    <div id="screenshot-controls" class="screenshot-controls edit-only">
        <button id="generate-screenshot" class="btn btn-success">
            <i class="fas fa-download"></i> Generate Screenshot
        </button>
        <button id="print-statement" class="btn btn-secondary">
            <i class="fas fa-print"></i> Print Statement
        </button>
    </div>

    <script src="app.js"></script>
</body>
</html>