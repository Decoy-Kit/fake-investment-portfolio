<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake Investment Portfolio</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="broker-name-container">
                        <h1 id="broker-name"><i class="fas fa-chart-line"></i> <span id="broker-name-text">Investment Portfolio</span></h1>
                        <button id="edit-broker-name" class="btn-icon edit-only" title="Edit broker name">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>
                </div>
                <div class="header-controls edit-only">
                    <button id="hamburger-menu-btn" class="btn btn-icon hamburger-menu-btn" title="Menu">
                        <i class="fas fa-bars"></i>
                    </button>
                    <!-- Hamburger Menu Dropdown -->
                    <div id="hamburger-menu" class="hamburger-menu edit-only">
                        <div class="hamburger-menu-content">
                            <div class="menu-section">
                                <label for="currency-selector" class="menu-label" data-i18n="menu.currency">Currency:</label>
                                <select id="currency-selector" class="btn btn-secondary" title="Select Currency" data-test="currency-selector">
                                    <option value="USD">$ USD</option>
                                    <option value="EUR">€ EUR</option>
                                    <option value="GBP">£ GBP</option>
                                    <option value="JPY">¥ JPY</option>
                                    <option value="CAD">C$ CAD</option>
                                    <option value="AUD">A$ AUD</option>
                                </select>
                            </div>
                            <div class="menu-section">
                                <label class="menu-checkbox-label">
                                    <input type="checkbox" id="show-profit-toggle" checked data-test="show-profit-toggle">
                                    <span data-i18n="menu.showProfit">Show Profit/Loss</span>
                                </label>
                            </div>
                            <div class="menu-section">
                                <div class="menu-info-box">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <span data-i18n="menu.volatilityWarning">Enabling fake price changes can make your portfolio values fluctuate. This may look less believable in some contexts.</span>
                                </div>
                                <label class="menu-checkbox-label">
                                    <input type="checkbox" id="enable-volatility-toggle" data-test="enable-volatility-toggle">
                                    <span data-i18n="menu.enableVolatility">Enable Fake Price Changes</span>
                                </label>
                            </div>
                            <div class="menu-section">
                                <label class="menu-checkbox-label">
                                    <input type="checkbox" id="institutional-account-toggle" data-test="institutional-account-toggle">
                                    <span data-i18n="menu.institutionalAccount">Institutional Account</span>
                                </label>
                            </div>
                            <div class="menu-section" id="dark-pool-section" style="display: none;">
                                <label class="menu-checkbox-label">
                                    <input type="checkbox" id="dark-pool-toggle" data-test="dark-pool-toggle">
                                    <span data-i18n="menu.darkPoolAccess">Dark Pool Access</span>
                                </label>
                            </div>
                            <button id="screenshot-mode-btn" class="btn btn-secondary menu-btn">
                                <i class="fas fa-camera"></i> <span data-i18n="menu.screenshot">Screenshot Mode</span>
                            </button>
                            <button id="theme-selector" class="btn btn-secondary menu-btn">
                                <i class="fas fa-palette"></i> <span data-i18n="menu.theme">Theme:</span> Default
                            </button>
                            <button id="export-data-btn" class="btn btn-success menu-btn" title="Export All Data">
                                <i class="fas fa-download"></i> <span data-i18n="menu.export">Export</span>
                            </button>
                            <button id="import-data-btn" class="btn btn-primary menu-btn" title="Import Data">
                                <i class="fas fa-upload"></i> <span data-i18n="menu.import">Import</span>
                            </button>
                            <button id="reset-portfolio-btn" class="btn btn-danger menu-btn" title="Reset Portfolio">
                                <i class="fas fa-undo"></i> <span data-i18n="menu.reset">Reset</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Navigation -->
        <nav class="main-nav">
            <button class="nav-item active" data-view="portfolio">
                <i class="fas fa-wallet"></i> <span data-i18n="nav.portfolio">Portfolio</span>
            </button>
            <button class="nav-item" data-view="transactions">
                <i class="fas fa-exchange-alt"></i> <span data-i18n="nav.transactions">Transactions</span>
            </button>
            <button class="nav-item" data-view="analytics">
                <i class="fas fa-chart-bar"></i> <span data-i18n="nav.analytics">Analytics</span>
            </button>
        </nav>

        <!-- Portfolio Overview -->
        <section id="portfolio-view" class="view active">
            <div class="portfolio-summary">
                <div class="total-value">
                    <h2 data-i18n="portfolio.totalValue">Total Portfolio Value</h2>
                    <div class="value-display">
                        <span class="currency">$</span>
                        <span id="total-value">0.00</span>
                    </div>
                    <div class="change-display">
                        <span id="total-change">+$0.00</span>
                        <span id="total-change-percent">(+0.00%)</span>
                    </div>
                </div>
                <div class="balance-display">
                    <h3 data-i18n="portfolio.availableBalance">Available Balance</h3>
                    <div class="balance-container">
                        <div class="value-display">
                            <span class="currency">$</span>
                            <span id="balance-value" data-test="balance-value">0.00</span>
                        </div>
                        <button id="edit-balance" class="btn-icon edit-only" title="Edit balance" data-test="edit-balance-btn">
                            <i class="fas fa-pen"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="holdings-section">
                <div class="section-header">
                    <h3 data-i18n="portfolio.holdings">Holdings</h3>
                    <button id="add-asset-btn" class="btn btn-primary edit-only" data-test="open-add-asset-modal">
                        <i class="fas fa-plus"></i> <span data-i18n="portfolio.addAsset">Add Asset</span>
                    </button>
                </div>
                <div class="holdings-search-container">
                    <input type="text" id="holdings-search" class="holdings-search-input" placeholder="Search holdings by symbol or name..." data-i18n="portfolio.searchHoldings" data-test="holdings-search">
                </div>
                <div id="holdings-list" class="holdings-list">
                    <!-- Holdings will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Transactions View -->
        <section id="transactions-view" class="view">
            <div class="section-header">
                <h3 data-i18n="transactions.title">Transaction History</h3>
                <button id="add-transaction-btn" class="btn btn-primary edit-only">
                    <i class="fas fa-plus"></i> <span data-i18n="transactions.add">Add Transaction</span>
                </button>
            </div>
            <div id="transactions-list" class="transactions-list">
                <!-- Transactions will be populated by JavaScript -->
            </div>
        </section>

        <!-- Analytics View -->
        <section id="analytics-view" class="view">
            <div class="analytics-grid">
                <div class="chart-container">
                    <h3 data-i18n="analytics.performance">Portfolio Performance</h3>
                    <canvas id="performance-chart" width="400" height="200"></canvas>
                </div>
                <div class="stats-container">
                    <h3 data-i18n="analytics.statistics">Statistics</h3>
                    <div class="stat-item">
                        <span class="stat-label" data-i18n="analytics.totalInvested">Total Invested:</span>
                        <span id="total-invested">$0.00</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label" data-i18n="analytics.totalReturn">Total Return:</span>
                        <span id="total-return">$0.00</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label" data-i18n="analytics.bestPerformer">Best Performer:</span>
                        <span id="best-performer">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label" data-i18n="analytics.totalTransactions">Total Transactions:</span>
                        <span id="total-transactions">0</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modals -->
    <!-- Add Asset Modal -->
    <div id="add-asset-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.addAsset.title">Add New Asset</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="add-asset-form">
                <div class="form-group">
                    <label for="asset-symbol" data-i18n="modal.addAsset.symbol">Symbol:</label>
                    <div class="symbol-input-container">
                        <div class="symbol-nasdaq-container">
                            <input type="text" id="asset-symbol" required placeholder="e.g., AAPL, BTC" data-i18n="modal.addAsset.symbolPlaceholder" autocomplete="off" data-test="asset-symbol">
                            <a id="asset-nasdaq-link" href="#" target="_blank" class="btn btn-secondary btn-small" title="Check price on NASDAQ" style="display: none;">
                                <i class="fas fa-external-link-alt"></i> <span data-i18n="modal.addAsset.nasdaq">NASDAQ</span>
                            </a>
                        </div>
                        <div id="ticker-suggestions" class="ticker-suggestions hidden"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="asset-name" data-i18n="modal.addAsset.name">Name:</label>
                    <input type="text" id="asset-name" required placeholder="e.g., Apple Inc." data-i18n="modal.addAsset.namePlaceholder" data-test="asset-name">
                </div>
                <div class="form-group form-row">
                    <div class="form-field form-field-third">
                        <label for="asset-quantity" data-i18n="modal.addAsset.quantity">Initial Quantity:</label>
                        <input type="number" id="asset-quantity" step="0.00001" required data-test="asset-quantity">
                    </div>
                    <div class="form-field form-field-third">
                        <label for="asset-price" id="asset-price-label" data-test="asset-price-label" data-i18n="modal.addAsset.price">Current Price ($):</label>
                        <div class="price-input-container">
                            <input type="number" id="asset-price" step="0.01" required data-test="asset-price">
                            <div id="price-status" class="price-status hidden">
                                <span id="price-status-text"></span>
                                <button type="button" id="fetch-price-btn" class="btn-icon" title="Fetch current price">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-field form-field-third" id="asset-discount-field" style="display: none;">
                        <label for="asset-discount" data-i18n="menu.discountLabel">Discount (%):</label>
                        <input type="number" id="asset-discount" step="0.01" min="0" max="100" placeholder="0.00" data-test="asset-discount">
                    </div>
                </div>
                <div id="asset-purchase-preview" class="transaction-preview hidden">
                    <div id="asset-purchase-preview-content"></div>
                </div>
                <div class="form-actions">
                    <button type="submit" id="add-asset-submit-btn" class="btn btn-primary" data-test="add-asset-btn" data-i18n="modal.addAsset.submit">Add Asset</button>
                    <button type="button" class="btn btn-secondary close-modal" data-i18n="modal.addAsset.cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Transaction Modal -->
    <div id="add-transaction-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.addTransaction.title">Add Transaction</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="add-transaction-form">
                <div class="form-group">
                    <label for="transaction-asset" data-i18n="modal.addTransaction.asset">Asset:</label>
                    <div class="asset-selection-container">
                        <select id="transaction-asset" required>
                            <option value="" data-i18n="modal.addTransaction.selectAsset">Select an asset</option>
                        </select>
                        <a id="transaction-nasdaq-link" href="#" target="_blank" class="btn btn-secondary btn-small" title="Check price on NASDAQ" style="display: none;">
                            <i class="fas fa-external-link-alt"></i> <span data-i18n="modal.addAsset.nasdaq">NASDAQ</span>
                        </a>
                    </div>
                </div>
                <div class="form-group">
                    <label for="transaction-type" data-i18n="modal.addTransaction.type">Type:</label>
                    <select id="transaction-type" required>
                        <option value="buy" data-i18n="modal.addTransaction.buy">Buy</option>
                        <option value="sell" data-i18n="modal.addTransaction.sell">Sell</option>
                    </select>
                </div>
                <div class="form-group form-row">
                    <div class="form-field form-field-third">
                        <label for="transaction-quantity" data-i18n="modal.addTransaction.quantity">Quantity:</label>
                        <input type="number" id="transaction-quantity" step="0.00001" required>
                    </div>
                    <div class="form-field form-field-third">
                        <label for="transaction-price" id="transaction-price-label" data-i18n="modal.addTransaction.price">Price per unit ($):</label>
                        <input type="number" id="transaction-price" step="0.01" required>
                    </div>
                    <div class="form-field form-field-third" id="transaction-discount-field" style="display: none;">
                        <label for="transaction-discount" data-i18n="menu.discountLabel">Discount (%):</label>
                        <input type="number" id="transaction-discount" step="0.01" min="0" max="100" placeholder="0.00" data-test="transaction-discount">
                    </div>
                </div>
                <div class="form-group">
                    <label for="transaction-date" data-i18n="modal.addTransaction.date">Date:</label>
                    <input type="datetime-local" id="transaction-date" required>
                </div>
                <div id="transaction-preview" class="transaction-preview hidden">
                    <div id="transaction-preview-content"></div>
                </div>
                <div class="form-actions">
                    <button type="submit" id="add-transaction-submit-btn" class="btn btn-primary" data-i18n="modal.addTransaction.submit">Add Transaction</button>
                    <button type="button" class="btn btn-secondary close-modal" data-i18n="modal.addTransaction.cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Reset Confirmation Modal -->
    <div id="reset-confirmation-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.reset.title">Reset Portfolio</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="warning-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p><strong data-i18n="modal.reset.warning">Warning:</strong> <span data-i18n="modal.reset.warningText">This action will permanently delete all your portfolio data, including:</span></p>
                    <ul>
                        <li data-i18n="modal.reset.item1">All assets and holdings</li>
                        <li data-i18n="modal.reset.item2">Transaction history</li>
                        <li data-i18n="modal.reset.item3">Portfolio balance (will reset to default)</li>
                    </ul>
                    <p data-i18n="modal.reset.cannotUndo">This action cannot be undone.</p>
                </div>
                <div class="additional-reset-options">
                    <label class="checkbox-container">
                        <input type="checkbox" id="reset-broker-theme-checkbox">
                        <span class="checkmark"></span>
                        <span data-i18n="modal.reset.alsoReset">Also reset broker name and theme to default</span>
                    </label>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" id="confirm-reset-btn" class="btn btn-danger">
                    <i class="fas fa-trash-alt"></i> <span data-i18n="modal.reset.confirm">Yes, Reset Everything</span>
                </button>
                <button type="button" class="btn btn-secondary close-modal" data-i18n="modal.reset.cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Import Confirmation Modal -->
    <div id="import-confirmation-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.import.title">Import Portfolio Data</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="warning-content">
                    <i class="fas fa-exclamation-triangle warning-icon"></i>
                    <p><strong data-i18n="modal.import.warning">Warning:</strong> <span data-i18n="modal.import.warningText">Importing data will completely replace all current portfolio data including:</span></p>
                    <ul>
                        <li data-i18n="modal.import.item1">Portfolio assets and holdings</li>
                        <li data-i18n="modal.import.item2">Transaction history</li>
                        <li data-i18n="modal.import.item3">Portfolio balance</li>
                        <li data-i18n="modal.import.item4">Settings (currency, theme, broker names)</li>
                    </ul>
                    <p data-i18n="modal.import.cannotUndo">This action cannot be undone. Make sure to export your current data first if you want to keep it.</p>
                </div>
                <div class="file-input-container">
                    <input type="file" id="import-file-input" accept=".json" style="display: none;">
                    <button type="button" id="select-file-btn" class="btn btn-secondary">
                        <i class="fas fa-file"></i> <span data-i18n="modal.import.selectFile">Select File to Import</span>
                    </button>
                    <span id="selected-file-name" class="selected-file-name"></span>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" id="confirm-import-btn" class="btn btn-primary" disabled>
                    <i class="fas fa-upload"></i> <span data-i18n="modal.import.confirm">Import Data</span>
                </button>
                <button type="button" class="btn btn-secondary close-modal" data-i18n="modal.import.cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Intro Modal -->
    <div id="intro-modal" class="modal intro-modal">
        <div class="modal-content intro-modal-content">
            <div class="modal-header">
                <h3 data-i18n="intro.welcome">Welcome to Fake Investment Portfolio</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="intro-modal-body">
                <!-- Step 1 -->
                <div class="intro-step active" data-step="1">
                    <div class="intro-step-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h4 data-i18n="intro.step1.title">Important Security Information</h4>
                    <p data-i18n="intro.step1.content">This tool helps you create fake portfolio screenshots to protect yourself from investment scammers. When sending information to potential scammers, follow these critical guidelines to ensure they cannot detect this is a fake portfolio.</p>
                </div>

                <!-- Step 2 -->
                <div class="intro-step" data-step="2">
                    <div class="intro-step-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <h4 data-i18n="intro.step2.title">Safe Sharing Methods</h4>
                    <p data-i18n="intro.step2.content">Use one of these three safe methods:</p>
                    <ul class="intro-list">
                        <li data-i18n="intro.step2.method1"><strong>Print Mode:</strong> Print the portfolio to PDF</li>
                        <li data-i18n="intro.step2.method2"><strong>Copy to Clipboard:</strong> Copy the statement and paste into an image editor</li>
                        <li data-i18n="intro.step2.method3"><strong>Screenshot Mode:</strong> Use the built-in screenshot feature</li>
                    </ul>
                </div>

                <!-- Step 3 -->
                <div class="intro-step" data-step="3">
                    <div class="intro-step-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h4 data-i18n="intro.step3.title">Critical: Hide the URL Bar</h4>
                    <div class="intro-warning-box">
                        <p data-i18n="intro.step3.pc"><strong>PC Screenshots (Recommended):</strong> The URL bar is typically hidden in fullscreen mode, making it harder to detect this tool.</p>
                        <p data-i18n="intro.step3.mobile"><strong>Mobile Screenshots:</strong> If you must use a mobile device, you <strong>MUST ALWAYS</strong> crop away the URL bar from your screenshots. Revealing the URL exposes this tool and defeats its purpose.</p>
                        <p class="intro-critical-warning" data-i18n="intro.step3.warning">⚠️ Never share screenshots showing the website URL in the address bar!</p>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="intro-step" data-step="4">
                    <div class="intro-step-icon">
                        <i class="fas fa-tools"></i>
                    </div>
                    <h4 data-i18n="intro.step4.title">Powerful Features</h4>
                    <p data-i18n="intro.step4.content">This tool gives you complete control:</p>
                    <ul class="intro-list">
                        <li data-i18n="intro.step4.feature1">Rename the imaginary broker to any name</li>
                        <li data-i18n="intro.step4.feature2">Change themes to match different broker styles</li>
                        <li data-i18n="intro.step4.feature3">Buy and sell stocks at any price you choose</li>
                        <li data-i18n="intro.step4.feature4">Backdate transactions to any time (e.g., when scammers told you to buy)</li>
                        <li data-i18n="intro.step4.feature5">Adjust your portfolio balance freely</li>
                    </ul>
                </div>

                <!-- Step Indicators -->
                <div class="intro-step-indicators">
                    <span class="step-dot active" data-step-indicator="1"></span>
                    <span class="step-dot" data-step-indicator="2"></span>
                    <span class="step-dot" data-step-indicator="3"></span>
                    <span class="step-dot" data-step-indicator="4"></span>
                </div>
            </div>
            <div class="intro-modal-footer">
                <div class="intro-checkbox">
                    <label>
                        <input type="checkbox" id="dont-show-intro-again">
                        <span data-i18n="intro.dontShowAgain">Don't show this again</span>
                    </label>
                </div>
                <div class="intro-buttons">
                    <button type="button" id="intro-skip-btn" class="btn btn-secondary" data-i18n="intro.skip">Skip Tutorial</button>
                    <button type="button" id="intro-prev-btn" class="btn btn-secondary" data-i18n="intro.previous" style="display: none;">Previous</button>
                    <button type="button" id="intro-next-btn" class="btn btn-primary" data-i18n="intro.next">Next</button>
                    <button type="button" id="intro-finish-btn" class="btn btn-success" data-i18n="intro.finish" style="display: none;">Get Started</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Screenshot Controls -->
    <div id="screenshot-controls" class="screenshot-controls edit-only">
        <button id="generate-screenshot" class="btn btn-success">
            <i class="fas fa-download"></i> <span data-i18n="screenshot.generate">Generate Screenshot</span>
        </button>
        <button id="print-statement" class="btn btn-secondary">
            <i class="fas fa-print"></i> <span data-i18n="screenshot.print">Print Statement</span>
        </button>
        <button id="copy-statement" class="btn btn-secondary">
            <i class="fas fa-copy"></i> <span data-i18n="screenshot.copy">Copy Statement</span>
        </button>
    </div>

    <script src="app.js"></script>
</body>
</html>